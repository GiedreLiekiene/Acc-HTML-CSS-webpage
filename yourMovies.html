<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css?family=Inter"
      rel="stylesheet"
    />
    <link href="./yourMovies.css" rel="stylesheet" type="text/css" />
    <title>Your Movies</title>
  </head>
  <body>
    <div class="container">
      <div class="header">Movie rental</div>
      <div class="content">
        <table class="table1">
          <tr>
            <td>Home</td>
            <td>Your movies</td>
            <td>Profile</td>
          </tr>
        </table>

        <table class="table2">
          <th class="main-heading" colspan="5">Available Movies</th>
          <tr class="table-headings">
            <th>Name</th>
            <th>Genre</th>
            <th>Time</th>
            <th>Price</th>
            <th></th>
          </tr>

          <!-- Previous HTML/CSS code -->
          <!-- <tr class="table-content">
                    <td>Batman</td>
                    <td>Action</td>
                    <td><button class="button-time">&#60;</button ><span class="time-window">12h</span><button class="button-time">&#62;</button></td>
                    <td>4.55$</td>
                    <td class="btn-column"><button class="button" href="yourMovies.html">Remove</button></td>
                  </tr>
                  <tr class="table-content">
                    <td>Batman</td>
                    <td>Action</td>
                    <td><button class="button-time">&#60;</button ><span class="time-window">12h</span><button class="button-time">&#62;</button></td>
                    <td>4.55$</td>
                    <td class="btn-column"><button class="button" href="yourMovies.html">Remove</button></td>
                  </tr> -->
        </table>
      </div>
    </div>

    <script>
      // JavaScript array containing information about the movies the user has rented
      const yourMovies = [
        {
          name: "Batman",
          genre: "Action",
          time: "12h",
          price: "4.55$",
        },
        {
          name: "Batman",
          genre: "Action",
          time: "12h",
          price: "4.55$",
        },
      ];

      // Function to generate the list of rented movies
      function generateRentedMoviesList() {
        const rentedMoviesTable = document.querySelector(".table2");

        yourMovies.forEach((movie) => {
          const row = document.createElement("tr");
          row.className = "table-content";

          const nameCell = document.createElement("td");
          nameCell.textContent = movie.name;
          row.appendChild(nameCell);

          const genreCell = document.createElement("td");
          genreCell.textContent = movie.genre;
          row.appendChild(genreCell);

          const timeCell = document.createElement("td");
          const timeWindow = document.createElement("span");
          timeWindow.className = "time-window";
          const leftArrowButton = createTimeButton("<", "button-time");
          const rightArrowButton = createTimeButton(">", "button-time");
          let rentalTime = parseInt(movie.time); // Parse the rental time as an integer

          leftArrowButton.addEventListener("click", () => {
            rentalTime = Math.max(rentalTime - 12, 12); // Decrement by 12 hours, but not below 12 hours
            updateTimeWindow();
          });

          rightArrowButton.addEventListener("click", () => {
            rentalTime = Math.min(rentalTime + 12, 168); // Increment by 12 hours, but not above 168 hours (1 week)
            updateTimeWindow();
          });

          function updateTimeWindow() {
            timeWindow.textContent = rentalTime + "h";
          }

          updateTimeWindow();

          timeCell.appendChild(leftArrowButton);
          timeCell.appendChild(timeWindow);
          timeCell.appendChild(rightArrowButton);
          row.appendChild(timeCell);

          const priceCell = document.createElement("td");
          priceCell.textContent = movie.price;
          row.appendChild(priceCell);

          const buttonCell = document.createElement("td");
          buttonCell.className = "btn-column";
          const removeButton = document.createElement("button");
          removeButton.className = "button";
          removeButton.textContent = "Remove";
          removeButton.addEventListener("click", () => {
            removeMovie(movie);
          });
          buttonCell.appendChild(removeButton);
          row.appendChild(buttonCell);

          rentedMoviesTable.appendChild(row);
        });
      }

      // Helper function to create time buttons for rental period
      function createTimeButton(text, className) {
        const button = document.createElement("button");
        button.className = className;
        button.textContent = text;
        return button;
      }

      // Function to handle removing a movie from yourMovies array
      function removeMovie(movie) {
        const movieIndex = yourMovies.findIndex((m) => m.name === movie.name);
        if (movieIndex !== -1) {
          yourMovies.splice(movieIndex, 1);
          generateRentedMoviesList(); // Update the table after removing the movie
        }
      }

      // Call the function to generate the list of rented movies on page load
      generateRentedMoviesList();
    </script>

    <div class="footer">
      <div class="footer-sec-1">Made by: Giedre Liekiene</div>
      <div class="footer-sec-2">2023</div>
    </div>
  </body>
</html>
